<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
   

<ui:decorate template="/layout/template_admin.xhtml">
    <ui:define name="conteudo">


    
        <p:panel header="Refeições confirmadas">
        <h:form  id="formFiltroUser">
            
                <f:metadata>
                    <f:viewParam  name="userId" value="#{refeicaoController.usuario.id}"></f:viewParam>
                 </f:metadata>     
            
                <p:outputLabel for="dataUso" value="De:" />
                <p:calendar id="dataUso" pattern="dd/MM/yyyy" showOn="button" value="#{refeicaoController.refeicao.dataUso}"/>
                &nbsp;
                &nbsp;
                &nbsp;
                <p:outputLabel for="dataFim" value="Até:" />
                <p:calendar id="dataFim" pattern="dd/MM/yyyy" showOn="button" value="#{refeicaoController.refeicao.dataFimPesquisa}"/>                
                
                &nbsp;
                <p:commandButton value="Pesquisar" action="#{refeicaoController.pesquisa()}" update=":refeicoesList">
                </p:commandButton>
                
        </h:form>
        </p:panel>    
    
<h:form id="refeicoesList">
    
    <p:dataTable var="refeicao" value="#{refeicaoController.refeicoes}" paginator="true">
        
        <p:column headerText="Código">
            <h:outputText value="#{refeicao.id}" />
        </p:column>

        <p:column headerText="Usuário">
            <h:outputText value="#{refeicao.usuario.descricao}" />
        </p:column>
        
        <p:column headerText="Data">
            <h:outputText value="#{refeicao.dataUso}">
              <f:convertDateTime pattern="dd/MM/yyyy"/>
            </h:outputText>
        </p:column>        

        <p:column headerText="Confirmação">
            <h:outputText value="#{refeicao.dataCadFormatada}" />
        </p:column>
        
        <p:column headerText="Status">
            <h:outputText value="#{refeicao.status}" />
        </p:column>        

        <p:column headerText="Ações">
            <!--
            <p:commandButton icon="ui-icon-search" value="Detalhes" title="Detalhes" onclick="PF('dlgOperacaoDetalhes').show()"/>           
            -->
        </p:column>            
            
    </p:dataTable>              
</h:form>        
        
        
        <p:dialog appendTo="@(body)" 
                  modal="true" 
                  header="Detalhes" 
                  widgetVar="dlgSelectUser"
                  width="70%"
                  height="90%">
            <ui:include src="/usuario/busca.xhtml"/>
        </p:dialog>        
        
    
        
    </ui:define>
</ui:decorate>        
        
</html>

